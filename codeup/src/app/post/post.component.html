<div class="container" style="max-width: 100%; min-height: 100vh; background-color: #dae0e6; padding-bottom: 20px">
  <div class="row">

    <div class="col col-md-8 white-block sort-container">
      <div class="row">
        <div class="col-md-2">
          <div class="center">
            <mat-icon style="cursor: pointer" (click)="upvote(true)" class="{{userPostVote && userPostVote.upvote ? 'upvote' : null}}">expand_less</mat-icon>
            <p style="margin:0">{{post.note}}</p>
            <mat-icon style="cursor: pointer" (click)="upvote(false)" class="{{userPostVote && !userPostVote.upvote ? 'downvote' : null}}">expand_more</mat-icon>
          </div>
        </div>
        <div class="col-md-10">
          <div>
            <a *ngIf="user" href="/account/{{user.id}}"
               style="display: inline; font-weight: bold; color: black">{{user ? user.username : "deleted"}} . </a>
            <p *ngIf="post" style="display: inline; color: dimgray">
              &nbsp;&nbsp;Published {{post.creationDate | date: "MMM dd, YYYY"}}</p>
          </div>
          <br>
          <h2 *ngIf="post">{{post.title}}</h2>
          <p class="tag" *ngIf="forum">{{forum.title}}</p>
          <div *ngIf="post" [innerHTML]="post.content"></div>

          <div style="margin-top: 4vh; display: flex">
            <mat-icon style="display:inline-block"> comment</mat-icon>
            <p style="display: inline-block" >&nbsp;{{commentCount ? commentCount : 0}} comments</p>
            <mat-icon style="display:inline-block; margin-left: 2vw"> share</mat-icon>
            <p style="display: inline-block">share this post</p>
          </div>
        </div>
      </div>
    </div>


    <div class="col col-md-3 sort-container white-block about">
      <h2 *ngIf="forum" style="
         background-image: url('https://media.discordapp.net/attachments/951109231099133972/971419158505984050/doodad.png');
         color: black;

         background-color: {{forum.color}};">

        <p>About this community</p></h2>

      <p *ngIf="forum">{{forum.description}}</p>
      <hr style="width: 50%; margin: auto;size: 1px">
      <p *ngIf="forum" style="display: flex; align-content: baseline; align-items: flex-end ">
        <mat-icon>cake</mat-icon>
        <label> &nbsp; created {{forum.creationDate | date: "MMM dd, YYYY"}}</label></p>
    </div>

    <div class="col col-md-8 white-block sort-container">
      <div class="container bootstrap snippets bootdey">
        <div class="row">
          <div class="col-md-12">
            <div class="blog-comment">
              <h3 class="text-success">Comments</h3>
              <hr/>
              <div>
                <textarea #target class="commentBox" [(ngModel)]="commentValue"
                          placeholder="{{respondUsername ? ('@' + respondUsername) : 'Your comment'}}"></textarea>
                <div style="display: flex; justify-content: flex-end; margin-bottom: 10px">
                  <button style="background-color: red; display: inline-block; margin-right: 5px" mat-raised-button
                          color="accent" (click)="respondId = null; commentValue = ''; respondUsername = undefined">
                    Cancel
                  </button>
                  <button style="background-color: #FFC500; display: inline-block" mat-raised-button color="accent"
                          (click)="sendComment()" [disabled]="commentValue.length<=0 || (editMessage && commentValue === editMessage.content)">{{editMessage ? 'Edit' : 'Send'}}
                  </button>
                </div>
              </div>
              <ul class="comments">
                <li class="clearfix" *ngFor="let item of comments">
                  <img src="https://bootdey.com/img/Content/user_2.jpg" class="avatar" alt="">
                  <div class="post-comments">
                    <p class="meta">{{item.comment.comment.creationDate | date: "MMM dd, YYYY"}} <a
                      href="/account/{{item.comment.user.id}}">{{item.comment.user.username}}</a> says : <i
                      class="pull-right"><a style="color: #82b440; cursor: pointer;"
                                            (click)="scrollToElement(target); respondId = item.comment.comment.id; respondUsername = item.comment.user.username"><small>Reply</small></a></i>
                      <label style="float: right">
                        <small style="cursor: pointer; color: cornflowerblue"
                               *ngIf="loggedUser && item.comment.user.id === loggedUser.id"
                               (click)="scrollToElement(target); editSetup(item.comment.comment)">edit</small> &nbsp;
                        <small style="cursor: pointer; color: red"
                               *ngIf="loggedUser && item.comment.user.id === loggedUser.id"
                               (click)="delete(item.comment.comment.id)">delete</small>
                      </label> </p>
                    <p>
                      {{item.comment.comment.content}}
                    </p>
                  </div>
                  <ul class="comments" *ngFor="let response of item.responses">
                    <li class="clearfix">
                      <img src="https://bootdey.com/img/Content/user_3.jpg" class="avatar" alt="">
                      <div class="post-comments">
                        <p class="meta">{{response.comment.creationDate | date: "MMM dd, YYYY"}} <a
                          href="#">{{response.user.username}}</a> says :
                          <i class="pull-right"><a
                            (click)="scrollToElement(target); respondId = item.comment.comment.id; respondUsername = response.user.username"><small>Reply</small></a></i>
                        <label style="float: right">
                          <small style="cursor: pointer; color: cornflowerblue"
                                 *ngIf="loggedUser && response.user.id === loggedUser.id"
                                 (click)="scrollToElement(target); editSetup(response.comment)">edit</small> &nbsp;
                          <small style="cursor: pointer; color: red"
                                 *ngIf="loggedUser && response.user.id === loggedUser.id"
                                 (click)="delete(response.comment.id)">delete</small>
                        </label> </p>
                        <p>
                          {{response.comment.content}}
                        </p>
                      </div>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col col-md-3 sort-container white-block about">
    </div>
  </div>
</div>
